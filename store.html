<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdminHub - My Store</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--poppins);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
        }

        .store-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .store-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
        }

        .back-button {
            position: absolute;
            top: 30px;
            left: 30px;
            background: var(--blue);
            color: var(--light);
            border: none;
            padding: 10px 15px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .back-button:hover {
            background: #2980e6;
            transform: translateY(-2px);
        }

        .store-title {
            font-size: 48px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--blue), var(--light-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .store-subtitle {
            font-size: 18px;
            color: var(--dark-grey);
            margin-bottom: 30px;
        }

        .store-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 36px;
            color: var(--blue);
            margin-bottom: 10px;
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--dark-grey);
        }

        .store-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--blue);
            color: var(--light);
        }

        .btn-primary:hover {
            background: #2980e6;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(60, 145, 230, 0.3);
        }

        .btn-success {
            background: #27ae60;
            color: var(--light);
        }

        .btn-success:hover {
            background: #219a52;
        }

        .btn-warning {
            background: var(--orange);
            color: var(--light);
        }

        .btn-warning:hover {
            background: #e85d1e;
        }

        .store-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .content-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-icon {
            color: var(--blue);
            font-size: 28px;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .product-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .product-card:hover {
            transform: translateY(-5px);
            border-color: var(--blue);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .product-image {
            width: 100%;
            height: 150px;
            background: linear-gradient(135deg, var(--light-blue), var(--blue));
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: var(--light);
        }

        .product-name {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .product-price {
            font-size: 20px;
            font-weight: 700;
            color: var(--blue);
            margin-bottom: 8px;
        }

        .product-stock {
            font-size: 14px;
            color: var(--dark-grey);
            margin-bottom: 15px;
        }

        .product-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }

        .inventory-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: var(--grey);
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .inventory-item:hover {
            background: var(--light-blue);
            transform: translateX(5px);
        }

        .inventory-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .inventory-icon {
            width: 40px;
            height: 40px;
            background: var(--blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light);
            font-size: 18px;
        }

        .inventory-details h4 {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 4px;
        }

        .inventory-details p {
            font-size: 14px;
            color: var(--dark-grey);
        }

        .inventory-stock {
            text-align: right;
        }

        .stock-number {
            font-size: 18px;
            font-weight: 700;
            color: var(--blue);
        }

        .stock-status {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 10px;
            margin-top: 4px;
        }

        .stock-high {
            background: rgba(39, 174, 96, 0.1);
            color: #27ae60;
        }

        .stock-medium {
            background: rgba(243, 156, 18, 0.1);
            color: #f39c12;
        }

        .stock-low {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
        }

        .sales-chart {
            height: 200px;
            background: var(--grey);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .chart-placeholder {
            text-align: center;
            color: var(--dark-grey);
        }

        .recent-sales {
            max-height: 300px;
            overflow-y: auto;
        }

        .sale-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            background: var(--grey);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .sale-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sale-avatar {
            width: 35px;
            height: 35px;
            background: var(--blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light);
            font-size: 14px;
            font-weight: 600;
        }

        .sale-details h5 {
            font-size: 14px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 2px;
        }

        .sale-details p {
            font-size: 12px;
            color: var(--dark-grey);
        }

        .sale-amount {
            font-size: 16px;
            font-weight: 700;
            color: var(--blue);
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .modal-content {
            background: var(--light);
            border-radius: 15px;
            padding: 0;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }

        .modal-header {
            background: var(--blue);
            color: var(--light);
            padding: 20px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--light);
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s ease;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .modal-body {
            padding: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
            font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--grey);
            border-radius: 8px;
            font-size: 14px;
            font-family: var(--poppins);
            color: var(--dark);
            background: var(--light);
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--blue);
            box-shadow: 0 0 0 3px rgba(60, 145, 230, 0.1);
        }

        .form-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        @media screen and (max-width: 768px) {
            .store-content {
                grid-template-columns: 1fr;
            }
            
            .product-grid {
                grid-template-columns: 1fr;
            }
            
            .store-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .back-button {
                position: static;
                margin-bottom: 20px;
                width: fit-content;
            }
        }

        @media screen and (max-width: 480px) {
            .store-stats {
                grid-template-columns: 1fr;
            }
            
            .store-actions {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="store-container">
        <!-- Store Header -->
        <div class="store-header">
            <a href="index.html" class="back-button">
                <i class="bx bx-arrow-back"></i>
                Back to Dashboard
            </a>
            
            <h1 class="store-title">My Store</h1>
            <p class="store-subtitle">Inventory Management & Sales Analytics</p>
            
            <!-- Store Statistics -->
            <div class="store-stats">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="bx bx-package"></i>
                    </div>
                    <div class="stat-number" id="totalProducts">24</div>
                    <div class="stat-label">Total Products</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="bx bx-dollar-circle"></i>
                    </div>
                    <div class="stat-number" id="totalRevenue">₹45,280</div>
                    <div class="stat-label">Total Revenue</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="bx bx-trending-up"></i>
                    </div>
                    <div class="stat-number" id="totalOrders">156</div>
                    <div class="stat-label">Total Orders</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="bx bx-user-check"></i>
                    </div>
                    <div class="stat-number" id="totalCustomers">89</div>
                    <div class="stat-label">Customers</div>
                </div>
            </div>
            
            <!-- Store Actions -->
            <div class="store-actions">
                <button class="action-btn btn-primary" onclick="showAddProductModal()">
                    <i class="bx bx-plus"></i>
                    Add Product
                </button>
                <button class="action-btn btn-success" onclick="generateReport()">
                    <i class="bx bx-bar-chart"></i>
                    Generate Report
                </button>
                <button class="action-btn btn-warning" onclick="manageInventory()">
                    <i class="bx bx-archive"></i>
                    Manage Inventory
                </button>
            </div>
        </div>
        
        <!-- Store Content -->
        <div class="store-content">
            <!-- Inventory Management -->
            <div class="content-section">
                <h2 class="section-title">
                    <i class="bx bx-archive section-icon"></i>
                    Inventory Overview
                </h2>
                
                <div id="inventoryList" class="inventory-list">
                    <!-- Inventory items will be loaded here -->
                </div>
            </div>
            
            <!-- Sales Analytics -->
            <div class="content-section">
                <h2 class="section-title">
                    <i class="bx bx-trending-up section-icon"></i>
                    Sales Analytics
                </h2>
                
                <div class="sales-chart">
                    <div class="chart-placeholder">
                        <i class="bx bx-line-chart" style="font-size: 48px; color: var(--dark-grey); margin-bottom: 10px;"></i>
                        <p>Sales chart will be displayed here</p>
                        <small>Integration with charting library required</small>
                    </div>
                </div>
                
                <h3 style="margin-bottom: 15px; color: var(--dark);">Recent Sales</h3>
                <div class="recent-sales" id="recentSales">
                    <!-- Recent sales will be loaded here -->
                </div>
            </div>
        </div>
        
        <!-- Products Grid -->
        <div class="content-section">
            <h2 class="section-title">
                <i class="bx bx-shopping-bag section-icon"></i>
                Product Catalog
            </h2>
            
            <div class="product-grid" id="productGrid">
                <!-- Products will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- Add Product Modal -->
    <div id="addProductModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Product</h3>
                <span class="modal-close" onclick="hideAddProductModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form onsubmit="addNewProduct(event)">
                    <div class="form-group">
                        <label>Product Name</label>
                        <input type="text" id="productName" placeholder="Enter product name" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Category</label>
                        <select id="productCategory" required>
                            <option value="">Select Category</option>
                            <option value="electronics">Electronics</option>
                            <option value="clothing">Clothing</option>
                            <option value="books">Books</option>
                            <option value="home">Home & Garden</option>
                            <option value="sports">Sports</option>
                            <option value="beauty">Beauty</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Price (₹)</label>
                        <input type="number" id="productPrice" placeholder="Enter price" min="0" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Stock Quantity</label>
                        <input type="number" id="productStock" placeholder="Enter stock quantity" min="0" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="productDescription" placeholder="Enter product description" rows="3"></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="hideAddProductModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Product</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAnalytics, logEvent } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        import { getDatabase, ref, get, set, push, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyB1wIsDf1qSLaIGyQvbri26z9e4ypxF-lw",
            authDomain: "apikawachi.firebaseapp.com",
            databaseURL: "https://apikawachi-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "apikawachi",
            storageBucket: "apikawachi.appspot.com",
            messagingSenderId: "7573902945",
            appId: "1:7573902945:web:be2c051ef0d0ceed787c20",
            measurementId: "G-GT0F7K4NLP"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const database = getDatabase(app);

        window.firebaseApp = app;
        window.firebaseDatabase = database;
        window.firebaseAnalytics = analytics;
        window.firebaseRef = ref;
        window.firebaseGet = get;
        window.firebaseSet = set;
        window.firebasePush = push;
        window.firebaseRemove = remove;
        window.firebaseLogEvent = logEvent;

        console.log("🔥 Firebase initialized for Store");
    </script>

    <script>
        // Sample data for the store
        let storeData = {
            products: [
                {
                    id: 1,
                    name: "Wireless Headphones",
                    category: "electronics",
                    price: 2999,
                    stock: 25,
                    description: "High-quality wireless headphones with noise cancellation",
                    icon: "bx-headphone"
                },
                {
                    id: 2,
                    name: "Gaming Mouse",
                    category: "electronics",
                    price: 1599,
                    stock: 15,
                    description: "Professional gaming mouse with RGB lighting",
                    icon: "bx-mouse"
                },
                {
                    id: 3,
                    name: "Smartphone Case",
                    category: "electronics",
                    price: 599,
                    stock: 50,
                    description: "Protective case for smartphones",
                    icon: "bx-mobile"
                },
                {
                    id: 4,
                    name: "Cotton T-Shirt",
                    category: "clothing",
                    price: 799,
                    stock: 30,
                    description: "100% cotton casual t-shirt",
                    icon: "bx-t-shirt"
                },
                {
                    id: 5,
                    name: "Programming Book",
                    category: "books",
                    price: 1299,
                    stock: 8,
                    description: "Learn advanced programming concepts",
                    icon: "bx-book"
                },
                {
                    id: 6,
                    name: "Coffee Mug",
                    category: "home",
                    price: 299,
                    stock: 40,
                    description: "Ceramic coffee mug with custom design",
                    icon: "bx-coffee"
                }
            ],
            sales: [
                { id: 1, customerName: "John Doe", product: "Wireless Headphones", amount: 2999, date: "2024-01-15" },
                { id: 2, customerName: "Jane Smith", product: "Gaming Mouse", amount: 1599, date: "2024-01-14" },
                { id: 3, customerName: "Mike Johnson", product: "Cotton T-Shirt", amount: 799, date: "2024-01-14" },
                { id: 4, customerName: "Sarah Wilson", product: "Coffee Mug", amount: 299, date: "2024-01-13" },
                { id: 5, customerName: "David Brown", product: "Smartphone Case", amount: 599, date: "2024-01-13" }
            ]
        };

        // Load inventory data
        function loadInventory() {
            const inventoryList = document.getElementById('inventoryList');
            inventoryList.innerHTML = '';

            storeData.products.forEach(product => {
                const stockStatus = getStockStatus(product.stock);
                const inventoryItem = document.createElement('div');
                inventoryItem.className = 'inventory-item';
                
                inventoryItem.innerHTML = `
                    <div class="inventory-info">
                        <div class="inventory-icon">
                            <i class="bx ${product.icon}"></i>
                        </div>
                        <div class="inventory-details">
                            <h4>${product.name}</h4>
                            <p>${product.category} • ₹${product.price}</p>
                        </div>
                    </div>
                    <div class="inventory-stock">
                        <div class="stock-number">${product.stock}</div>
                        <div class="stock-status ${stockStatus.class}">${stockStatus.text}</div>
                    </div>
                `;
                
                inventoryList.appendChild(inventoryItem);
            });
        }

        // Get stock status
        function getStockStatus(stock) {
            if (stock > 20) {
                return { class: 'stock-high', text: 'In Stock' };
            } else if (stock > 10) {
                return { class: 'stock-medium', text: 'Low Stock' };
            } else {
                return { class: 'stock-low', text: 'Very Low' };
            }
        }

        // Load recent sales
        function loadRecentSales() {
            const recentSales = document.getElementById('recentSales');
            recentSales.innerHTML = '';

            storeData.sales.slice(0, 5).forEach(sale => {
                const saleItem = document.createElement('div');
                saleItem.className = 'sale-item';
                
                const customerInitial = sale.customerName.charAt(0).toUpperCase();
                
                saleItem.innerHTML = `
                    <div class="sale-info">
                        <div class="sale-avatar">${customerInitial}</div>
                        <div class="sale-details">
                            <h5>${sale.customerName}</h5>
                            <p>${sale.product} • ${sale.date}</p>
                        </div>
                    </div>
                    <div class="sale-amount">₹${sale.amount}</div>
                `;
                
                recentSales.appendChild(saleItem);
            });
        }

        // Load product grid
        function loadProductGrid() {
            const productGrid = document.getElementById('productGrid');
            productGrid.innerHTML = '';

            storeData.products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                
                productCard.innerHTML = `
                    <div class="product-image">
                        <i class="bx ${product.icon}"></i>
                    </div>
                    <div class="product-name">${product.name}</div>
                    <div class="product-price">₹${product.price}</div>
                    <div class="product-stock">Stock: ${product.stock} units</div>
                    <div class="product-actions">
                        <button class="btn-small btn-primary" onclick="editProduct(${product.id})">
                            <i class="bx bx-edit"></i> Edit
                        </button>
                        <button class="btn-small btn-danger" onclick="deleteProduct(${product.id})">
                            <i class="bx bx-trash"></i> Delete
                        </button>
                    </div>
                `;
                
                productGrid.appendChild(productCard);
            });
        }

        // Update statistics
        function updateStatistics() {
            document.getElementById('totalProducts').textContent = storeData.products.length;
            
            const totalRevenue = storeData.sales.reduce((sum, sale) => sum + sale.amount, 0);
            document.getElementById('totalRevenue').textContent = `₹${totalRevenue.toLocaleString()}`;
            
            document.getElementById('totalOrders').textContent = storeData.sales.length;
            
            const uniqueCustomers = new Set(storeData.sales.map(sale => sale.customerName));
            document.getElementById('totalCustomers').textContent = uniqueCustomers.size;
        }

        // Show add product modal
        function showAddProductModal() {
            document.getElementById('addProductModal').style.display = 'flex';
        }

        // Hide add product modal
        function hideAddProductModal() {
            document.getElementById('addProductModal').style.display = 'none';
            clearProductForm();
        }

        // Clear product form
        function clearProductForm() {
            document.getElementById('productName').value = '';
            document.getElementById('productCategory').value = '';
            document.getElementById('productPrice').value = '';
            document.getElementById('productStock').value = '';
            document.getElementById('productDescription').value = '';
        }

        // Add new product
        function addNewProduct(event) {
            event.preventDefault();

            const name = document.getElementById('productName').value;
            const category = document.getElementById('productCategory').value;
            const price = parseFloat(document.getElementById('productPrice').value);
            const stock = parseInt(document.getElementById('productStock').value);
            const description = document.getElementById('productDescription').value;

            const categoryIcons = {
                electronics: 'bx-devices',
                clothing: 'bx-t-shirt',
                books: 'bx-book',
                home: 'bx-home',
                sports: 'bx-football',
                beauty: 'bx-heart'
            };

            const newProduct = {
                id: Date.now(),
                name: name,
                category: category,
                price: price,
                stock: stock,
                description: description,
                icon: categoryIcons[category] || 'bx-package'
            };

            storeData.products.push(newProduct);
            
            // Update displays
            loadInventory();
            loadProductGrid();
            updateStatistics();
            
            hideAddProductModal();
            showMessage(`Product "${name}" added successfully!`, 'success');

            // Log analytics
            if (window.firebaseLogEvent) {
                window.firebaseLogEvent(window.firebaseAnalytics, 'product_added', {
                    product_name: name,
                    category: category,
                    price: price
                });
            }
        }

        // Edit product
        function editProduct(productId) {
            const product = storeData.products.find(p => p.id === productId);
            if (product) {
                showMessage(`Edit functionality for "${product.name}" - Feature coming soon!`, 'info');
            }
        }

        // Delete product
        function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product?')) {
                const productIndex = storeData.products.findIndex(p => p.id === productId);
                if (productIndex > -1) {
                    const product = storeData.products[productIndex];
                    storeData.products.splice(productIndex, 1);
                    
                    loadInventory();
                    loadProductGrid();
                    updateStatistics();
                    
                    showMessage(`Product "${product.name}" deleted successfully!`, 'success');
                }
            }
        }

        // Generate report
        function generateReport() {
            const reportData = {
                date: new Date().toISOString(),
                totalProducts: storeData.products.length,
                totalRevenue: storeData.sales.reduce((sum, sale) => sum + sale.amount, 0),
                totalOrders: storeData.sales.length,
                inventory: storeData.products,
                sales: storeData.sales
            };

            const blob = new Blob([JSON.stringify(reportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `store_report_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);

            showMessage('Store report generated and downloaded!', 'success');

            if (window.firebaseLogEvent) {
                window.firebaseLogEvent(window.firebaseAnalytics, 'report_generated', {
                    report_type: 'store_summary'
                });
            }
        }

        // Manage inventory
        function manageInventory() {
            showMessage('Inventory management features - Coming soon!', 'info');
        }

        // Show message function
        function showMessage(message, type = 'info') {
            const messageDiv = document.createElement('div');
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 10000;
                max-width: 300px;
                word-wrap: break-word;
                animation: slideIn 0.3s ease;
            `;

            switch (type) {
                case 'success':
                    messageDiv.style.background = '#27ae60';
                    break;
                case 'error':
                    messageDiv.style.background = '#e74c3c';
                    break;
                case 'info':
                default:
                    messageDiv.style.background = '#3c91e6';
                    break;
            }

            messageDiv.textContent = message;
            document.body.appendChild(messageDiv);

            setTimeout(() => {
                messageDiv.remove();
            }, 4000);
        }

        // Initialize store on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadInventory();
            loadRecentSales();
            loadProductGrid();
            updateStatistics();
            
            showMessage('Store loaded successfully!', 'success');
            
            console.log('Store page initialized');
        });

        // Make functions globally available
        window.showAddProductModal = showAddProductModal;
        window.hideAddProductModal = hideAddProductModal;
        window.addNewProduct = addNewProduct;
        window.editProduct = editProduct;
        window.deleteProduct = deleteProduct;
        window.generateReport = generateReport;
        window.manageInventory = manageInventory;
        window.showMessage = showMessage;
    </script>
</body>
</html>
